<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰çŠ¶æ…‹ç©ºé–“è¡¨ç¾ã¸ã®å°å‡º</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <!-- KaTeX for LaTeX rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ]
        });"></script>
    <style>
        :root {
            --bg-primary: #fafafa;
            --bg-secondary: #ffffff;
            --text-primary: #1a1a2e;
            --text-secondary: #4a4a6a;
            --accent-blue: #2563eb;
            --accent-green: #059669;
            --accent-orange: #d97706;
            --accent-red: #dc2626;
            --accent-purple: #7c3aed;
            --border: #e5e5e5;
            --highlight-yellow: #fef3c7;
            --highlight-blue: #dbeafe;
            --highlight-green: #d1fae5;
            --highlight-pink: #fce7f3;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 2;
            padding: 2rem;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        h1 {
            font-family: 'Noto Serif JP', serif;
            font-size: 2.2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1rem;
        }
        
        h2 {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem;
            margin: 2.5rem 0 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-blue);
        }
        
        h3 {
            font-size: 1.2rem;
            margin: 2rem 0 1rem;
            color: var(--accent-blue);
        }
        
        h4 {
            font-size: 1.05rem;
            margin: 1.5rem 0 0.75rem;
        }
        
        p { margin: 1rem 0; text-align: justify; }
        
        /* Nomenclature Table */
        .nomenclature {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .nomenclature h3 {
            margin-top: 0;
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .nomenclature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .nomenclature-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .nomenclature-section h4 {
            margin: 0 0 0.75rem 0;
            font-size: 0.95rem;
            color: var(--accent-blue);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .nom-table {
            width: 100%;
            font-size: 0.9rem;
            border-collapse: collapse;
        }
        
        .nom-table td {
            padding: 0.4rem 0.5rem;
            vertical-align: top;
            border-bottom: 1px solid #eee;
        }
        
        .nom-table td:first-child {
            width: 80px;
            font-weight: 500;
            color: var(--accent-purple);
        }
        
        .nom-table td:last-child {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }
        
        /* Equation boxes */
        .eq-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-left: 4px solid var(--accent-blue);
            border-radius: 0 8px 8px 0;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        
        .eq-box.physical {
            border-left-color: var(--accent-green);
            background: var(--highlight-green);
        }
        
        .eq-box.state-space {
            border-left-color: var(--accent-purple);
            background: var(--highlight-blue);
        }
        
        .eq-box.important {
            border-left-color: var(--accent-orange);
            background: var(--highlight-yellow);
        }
        
        .eq-title {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        .eq-content {
            font-size: 1.1rem;
            line-height: 2.5;
        }
        
        /* Circuit diagram container */
        .circuit-container {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .circuit-svg {
            max-width: 100%;
            height: auto;
        }
        
        /* Step boxes */
        .step-box {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .step-number {
            width: 36px;
            height: 36px;
            background: var(--accent-blue);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        
        .step-title {
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .derivation-arrow {
            text-align: center;
            font-size: 2rem;
            color: var(--accent-blue);
            margin: 1rem 0;
        }
        
        /* Tables */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.95rem;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            text-align: left;
            border: 1px solid var(--border);
        }
        
        .comparison-table th {
            background: var(--highlight-blue);
            font-weight: 600;
        }
        
        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        /* Note box */
        .note {
            background: var(--highlight-yellow);
            border-left: 4px solid var(--accent-orange);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .note-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        /* Physical law card */
        .law-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .law-card h4 {
            color: white;
            margin-top: 0;
        }
        
        .law-card .eq-content {
            background: rgba(255,255,255,0.15);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .section-divider {
            height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green), var(--accent-orange));
            border-radius: 2px;
            margin: 3rem 0;
        }
        
        /* TOC */
        .toc {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .toc h3 {
            margin-top: 0;
            color: var(--text-primary);
        }
        
        .toc ol {
            margin: 0;
            padding-left: 1.5rem;
        }
        
        .toc li {
            margin: 0.5rem 0;
        }
        
        .toc a {
            color: var(--accent-blue);
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        /* KaTeX adjustments */
        .katex { font-size: 1.1em; }
        .katex-display { margin: 1rem 0; overflow-x: auto; }
        
        /* Colored variables in equations */
        .var-state { color: var(--accent-purple); }
        .var-input { color: var(--accent-blue); }
        .var-param { color: var(--accent-green); }
        .var-output { color: var(--accent-orange); }
        
        /* Appendix styling */
        .appendix {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 3rem;
        }
        
        .appendix h2 {
            border-bottom-color: var(--accent-green);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰çŠ¶æ…‹ç©ºé–“è¡¨ç¾ã¸ã®å°å‡º</h1>
        <p class="subtitle">Physical Modeling â†’ State-Space Representation</p>
        
        <!-- Nomenclature Section -->
        <div class="nomenclature">
            <h3>ğŸ“‹ è¨˜å·ä¸€è¦§ï¼ˆNomenclatureï¼‰</h3>
            <div class="nomenclature-grid">
                <!-- State Variables -->
                <div class="nomenclature-section">
                    <h4>çŠ¶æ…‹å¤‰æ•°ï¼ˆState Variablesï¼‰</h4>
                    <table class="nom-table">
                        <tr><td>$i_L$</td><td>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é›»æµ [A]</td></tr>
                        <tr><td>$i_{Ld}, i_{Lq}$</td><td>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é›»æµï¼ˆdqè»¸ï¼‰[A]</td></tr>
                        <tr><td>$v_o$</td><td>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µï¼ˆå‡ºåŠ›ï¼‰é›»åœ§ [V]</td></tr>
                        <tr><td>$v_{od}, v_{oq}$</td><td>å‡ºåŠ›é›»åœ§ï¼ˆdqè»¸ï¼‰[V]</td></tr>
                        <tr><td>$i_o$</td><td>å‡ºåŠ›é›»æµ [A]</td></tr>
                        <tr><td>$i_{od}, i_{oq}$</td><td>å‡ºåŠ›é›»æµï¼ˆdqè»¸ï¼‰[A]</td></tr>
                        <tr><td>$\omega$</td><td>è§’é€Ÿåº¦ [rad/s]</td></tr>
                        <tr><td>$\theta$</td><td>ä½ç›¸è§’ [rad]</td></tr>
                        <tr><td>$\varepsilon$</td><td>ç©åˆ†å™¨çŠ¶æ…‹</td></tr>
                        <tr><td>$E'_q$</td><td>éæ¸¡å†…éƒ¨èµ·é›»åŠ› [V]</td></tr>
                    </table>
                </div>
                
                <!-- Parameters -->
                <div class="nomenclature-section">
                    <h4>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆParametersï¼‰</h4>
                    <table class="nom-table">
                        <tr><td>$L_f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ãƒ³ã‚¹ [H]</td></tr>
                        <tr><td>$R_f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿æŠµæŠ— [Î©]</td></tr>
                        <tr><td>$C_f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿å®¹é‡ [F]</td></tr>
                        <tr><td>$L_c$</td><td>çµåˆã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ãƒ³ã‚¹ [H]</td></tr>
                        <tr><td>$J$</td><td>æ…£æ€§ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆ [kgÂ·mÂ²]</td></tr>
                        <tr><td>$D$</td><td>åˆ¶å‹•ï¼ˆãƒ€ãƒ³ãƒ”ãƒ³ã‚°ï¼‰ä¿‚æ•°</td></tr>
                        <tr><td>$X_d, X_q$</td><td>åŒæœŸãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹ [Î©]</td></tr>
                        <tr><td>$X'_d$</td><td>éæ¸¡ãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹ [Î©]</td></tr>
                        <tr><td>$T'_{d0}$</td><td>é–‹å›è·¯éæ¸¡æ™‚å®šæ•° [s]</td></tr>
                        <tr><td>$\omega_0$</td><td>åŒæœŸè§’é€Ÿåº¦ [rad/s]</td></tr>
                    </table>
                </div>
                
                <!-- Inputs -->
                <div class="nomenclature-section">
                    <h4>å…¥åŠ›ï¼ˆInputsï¼‰</h4>
                    <table class="nom-table">
                        <tr><td>$v_{inv}$</td><td>ã‚¤ãƒ³ãƒãƒ¼ã‚¿å‡ºåŠ›é›»åœ§ [V]</td></tr>
                        <tr><td>$v_g$</td><td>ç³»çµ±é›»åœ§ [V]</td></tr>
                        <tr><td>$T_m$</td><td>æ©Ÿæ¢°ãƒˆãƒ«ã‚¯ [NÂ·m]</td></tr>
                        <tr><td>$v_{ex}$</td><td>åŠ±ç£é›»åœ§ [V]</td></tr>
                        <tr><td>$P_0$</td><td>æœ‰åŠ¹é›»åŠ›æŒ‡ä»¤å€¤ [W]</td></tr>
                    </table>
                </div>
                
                <!-- Subscripts -->
                <div class="nomenclature-section">
                    <h4>æ·»å­—ï¼ˆSubscriptsï¼‰</h4>
                    <table class="nom-table">
                        <tr><td>$d, q$</td><td>dqå›è»¢åº§æ¨™ç³»ã®è»¸</td></tr>
                        <tr><td>$L$</td><td>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é–¢é€£</td></tr>
                        <tr><td>$o$</td><td>å‡ºåŠ›ï¼ˆoutputï¼‰</td></tr>
                        <tr><td>$f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆfilterï¼‰</td></tr>
                        <tr><td>$c$</td><td>çµåˆï¼ˆcouplingï¼‰</td></tr>
                        <tr><td>$m$</td><td>æ©Ÿæ¢°çš„ï¼ˆmechanicalï¼‰</td></tr>
                        <tr><td>$e$</td><td>é›»æ°—çš„ï¼ˆelectricalï¼‰</td></tr>
                        <tr><td>$i$</td><td>ç©åˆ†å™¨ï¼ˆintegratorï¼‰</td></tr>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Table of Contents -->
        <div class="toc">
            <h3>ç›®æ¬¡</h3>
            <ol>
                <li><a href="#section1">åŸºæœ¬çš„ãªç‰©ç†æ³•å‰‡ã®å¾©ç¿’</a></li>
                <li><a href="#section2">LCãƒ•ã‚£ãƒ«ã‚¿ã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚¤ãƒ³ãƒãƒ¼ã‚¿å…±é€šï¼‰</a></li>
                <li><a href="#section3">é€é›»ç·šã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«</a></li>
                <li><a href="#section4">PLLã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼ˆGFLï¼‰</a></li>
                <li><a href="#section5">ãƒ‰ãƒ«ãƒ¼ãƒ—/VSGåˆ¶å¾¡ï¼ˆGFMï¼‰</a></li>
                <li><a href="#section6">åŒæœŸç™ºé›»æ©Ÿã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼ˆSGï¼‰</a></li>
                <li><a href="#section7">çŠ¶æ…‹ç©ºé–“è¡¨ç¾ã¸ã®çµ±åˆ</a></li>
            </ol>
        </div>
        
        <!-- Section 1: Basic Physical Laws -->
        <h2 id="section1">1. åŸºæœ¬çš„ãªç‰©ç†æ³•å‰‡ã®å¾©ç¿’</h2>
        
        <p>é›»åŠ›ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¢ãƒ‡ãƒ«åŒ–ã¯ã€ã„ãã¤ã‹ã®åŸºæœ¬çš„ãªç‰©ç†æ³•å‰‡ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚</p>
        
        <h3>1.1 æ©Ÿæ¢°ç³»ï¼šãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³ã®é‹å‹•æ–¹ç¨‹å¼</h3>
        
        <div class="law-card">
            <h4>å›è»¢ä½“ã®é‹å‹•æ–¹ç¨‹å¼</h4>
            <p>å›è»¢ä½“ï¼ˆç™ºé›»æ©Ÿã®ãƒ­ãƒ¼ã‚¿ãªã©ï¼‰ã®è§’é‹å‹•é‡ä¿å­˜å‰‡ï¼š</p>
            <div class="eq-content">
                $$ J \frac{d\omega}{dt} = \sum \tau = \tau_{\text{æ©Ÿæ¢°}} - \tau_{\text{é›»æ°—}} - \tau_{\text{æå¤±}} $$
            </div>
        </div>
        
        <p>ã“ã‚Œã‚’æ¨™æº–çš„ãª2æ¬¡ç³»ã®å½¢ã§æ›¸ãã¨ï¼š</p>
        
        <div class="eq-box physical">
            <div class="eq-title">æ©Ÿæ¢°ç³»ã®æ¨™æº–å½¢ï¼ˆè³ªé‡-ãƒ€ãƒ³ãƒ‘-ãƒãƒç³»ã¨ã®å¯¾æ¯”ï¼‰</div>
            <div class="eq-content">
                $$ J \frac{d\omega}{dt} + D \omega = \tau_{\text{in}} - \tau_{\text{load}} $$
                
                <table class="nom-table" style="margin-top: 1rem;">
                    <tr><td>$J$</td><td>æ…£æ€§ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆ [kgÂ·mÂ²] â† è³ªé‡ $M$ ã«ç›¸å½“</td></tr>
                    <tr><td>$D$</td><td>åˆ¶å‹•ä¿‚æ•° [NÂ·mÂ·s/rad] â† ç²˜æ€§ä¿‚æ•°ã«ç›¸å½“</td></tr>
                    <tr><td>$\omega$</td><td>è§’é€Ÿåº¦ [rad/s] â† é€Ÿåº¦ $v$ ã«ç›¸å½“</td></tr>
                    <tr><td>$\tau_{\text{in}}$</td><td>å…¥åŠ›ãƒˆãƒ«ã‚¯ [NÂ·m] â† å¤–åŠ› $F$ ã«ç›¸å½“</td></tr>
                </table>
            </div>
        </div>
        
        <h3>1.2 é›»æ°—ç³»ï¼šã‚­ãƒ«ãƒ’ãƒ›ãƒƒãƒ•ã®æ³•å‰‡</h3>
        
        <div class="law-card">
            <h4>ã‚­ãƒ«ãƒ’ãƒ›ãƒƒãƒ•ã®é›»åœ§å‰‡ï¼ˆKVLï¼‰</h4>
            <p>é–‰å›è·¯ã«æ²¿ã£ãŸé›»åœ§é™ä¸‹ã®å’Œã¯ã‚¼ãƒ­ï¼š</p>
            <div class="eq-content">
                $$ \sum_k v_k = 0 \quad \text{ï¼ˆé–‰ãƒ«ãƒ¼ãƒ—ä¸Šï¼‰} $$
            </div>
        </div>
        
        <div class="law-card" style="margin-top: 1rem;">
            <h4>ã‚­ãƒ«ãƒ’ãƒ›ãƒƒãƒ•ã®é›»æµå‰‡ï¼ˆKCLï¼‰</h4>
            <p>ç¯€ç‚¹ã«æµå…¥ã™ã‚‹é›»æµã®å’Œã¯ã‚¼ãƒ­ï¼š</p>
            <div class="eq-content">
                $$ \sum_k i_k = 0 \quad \text{ï¼ˆç¯€ç‚¹ä¸Šï¼‰} $$
            </div>
        </div>
        
        <h3>1.3 å›è·¯ç´ å­ã®ç‰¹æ€§æ–¹ç¨‹å¼</h3>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>ç´ å­</th>
                    <th>ç‰¹æ€§æ–¹ç¨‹å¼</th>
                    <th>ã‚¨ãƒãƒ«ã‚®ãƒ¼è“„ç©</th>
                    <th>çŠ¶æ…‹å¤‰æ•°</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>æŠµæŠ— $R$</strong></td>
                    <td>$v = Ri$</td>
                    <td>ãªã—ï¼ˆæ•£é€¸ï¼‰</td>
                    <td>âˆ’</td>
                </tr>
                <tr>
                    <td><strong>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ $L$</strong></td>
                    <td>$v = L \dfrac{di}{dt}$</td>
                    <td>ç£æ°—ã‚¨ãƒãƒ«ã‚®ãƒ¼ $\frac{1}{2}Li^2$</td>
                    <td>é›»æµ $i$</td>
                </tr>
                <tr>
                    <td><strong>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µ $C$</strong></td>
                    <td>$i = C \dfrac{dv}{dt}$</td>
                    <td>é™é›»ã‚¨ãƒãƒ«ã‚®ãƒ¼ $\frac{1}{2}Cv^2$</td>
                    <td>é›»åœ§ $v$</td>
                </tr>
            </tbody>
        </table>
        
        <div class="note">
            <div class="note-title">ğŸ’¡ çŠ¶æ…‹å¤‰æ•°ã®é¸ã³æ–¹</div>
            <p>çŠ¶æ…‹å¤‰æ•°ã¯ã€Œã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è“„ç©ã™ã‚‹ç´ å­ã€ã®å¤‰æ•°ã‚’é¸ã³ã¾ã™ï¼š</p>
            <ul>
                <li>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ â†’ <strong>é›»æµ $i$</strong> ã‚’çŠ¶æ…‹å¤‰æ•°ã«</li>
                <li>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µ â†’ <strong>é›»åœ§ $v$</strong> ã‚’çŠ¶æ…‹å¤‰æ•°ã«</li>
                <li>å›è»¢ä½“ â†’ <strong>è§’é€Ÿåº¦ $\omega$</strong>ï¼ˆã¨è§’åº¦ $\theta$ï¼‰ã‚’çŠ¶æ…‹å¤‰æ•°ã«</li>
            </ul>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 2: LC Filter -->
        <h2 id="section2">2. LCãƒ•ã‚£ãƒ«ã‚¿ã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚¤ãƒ³ãƒãƒ¼ã‚¿å…±é€šï¼‰</h2>
        
        <p>GFLã¨GFMã‚¤ãƒ³ãƒãƒ¼ã‚¿ã¯ã©ã¡ã‚‰ã‚‚å‡ºåŠ›ã«LCãƒ•ã‚£ãƒ«ã‚¿ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã“ã®å›è·¯ã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰çŠ¶æ…‹æ–¹ç¨‹å¼ã‚’å°å‡ºã—ã¾ã™ã€‚</p>
        
        <h3>2.1 å›è·¯å›³</h3>
        
        <div class="circuit-container">
            <svg class="circuit-svg" viewBox="0 0 700 280" xmlns="http://www.w3.org/2000/svg">
                <rect width="700" height="280" fill="white"/>
                <text x="350" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">LCãƒ•ã‚£ãƒ«ã‚¿å›è·¯ï¼ˆå˜ç›¸ç­‰ä¾¡å›è·¯ï¼‰</text>
                
                <!-- Inverter bridge output -->
                <rect x="50" y="100" width="60" height="80" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
                <text x="80" y="140" text-anchor="middle" font-size="11" fill="#2563eb">PWM</text>
                <text x="80" y="158" text-anchor="middle" font-size="12" fill="#2563eb" font-style="italic">v</text>
                <text x="93" y="163" text-anchor="middle" font-size="9" fill="#2563eb">inv</text>
                
                <line x1="110" y1="140" x2="150" y2="140" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- Inductor Lf -->
                <rect x="150" y="125" width="80" height="30" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="4"/>
                <text x="175" y="145" text-anchor="middle" font-size="12" fill="#059669" font-style="italic">L</text>
                <text x="183" y="149" text-anchor="middle" font-size="9" fill="#059669">f</text>
                <text x="195" y="145" text-anchor="middle" font-size="12" fill="#059669">,</text>
                <text x="210" y="145" text-anchor="middle" font-size="12" fill="#059669" font-style="italic">R</text>
                <text x="220" y="149" text-anchor="middle" font-size="9" fill="#059669">f</text>
                
                <!-- Current arrow i_L -->
                <path d="M 170 115 L 190 115 L 185 110 M 190 115 L 185 120" stroke="#7c3aed" stroke-width="2" fill="none"/>
                <text x="175" y="105" text-anchor="middle" font-size="12" fill="#7c3aed" font-style="italic">i</text>
                <text x="183" y="109" text-anchor="middle" font-size="9" fill="#7c3aed">L</text>
                
                <line x1="230" y1="140" x2="320" y2="140" stroke="#1a1a2e" stroke-width="2"/>
                <circle cx="320" cy="140" r="4" fill="#1a1a2e"/>
                
                <!-- Capacitor Cf -->
                <line x1="320" y1="140" x2="320" y2="170" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="305" y="170" width="30" height="20" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="2"/>
                <text x="315" y="184" text-anchor="middle" font-size="12" fill="#d97706" font-style="italic">C</text>
                <text x="325" y="188" text-anchor="middle" font-size="9" fill="#d97706">f</text>
                <line x1="320" y1="190" x2="320" y2="220" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- Voltage label v_o -->
                <text x="350" y="170" font-size="12" fill="#d97706" font-style="italic">v</text>
                <text x="358" y="174" font-size="9" fill="#d97706">o</text>
                
                <!-- Ground -->
                <line x1="310" y1="220" x2="330" y2="220" stroke="#1a1a2e" stroke-width="2"/>
                <line x1="315" y1="225" x2="325" y2="225" stroke="#1a1a2e" stroke-width="1.5"/>
                <line x1="318" y1="230" x2="322" y2="230" stroke="#1a1a2e" stroke-width="1"/>
                
                <!-- Output inductor -->
                <line x1="320" y1="140" x2="400" y2="140" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="400" y="125" width="80" height="30" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
                <text x="435" y="145" text-anchor="middle" font-size="12" fill="#2563eb" font-style="italic">L</text>
                <text x="445" y="149" text-anchor="middle" font-size="9" fill="#2563eb">c</text>
                
                <!-- Current arrow i_o -->
                <path d="M 420 115 L 440 115 L 435 110 M 440 115 L 435 120" stroke="#7c3aed" stroke-width="2" fill="none"/>
                <text x="425" y="105" text-anchor="middle" font-size="12" fill="#7c3aed" font-style="italic">i</text>
                <text x="433" y="109" text-anchor="middle" font-size="9" fill="#7c3aed">o</text>
                
                <!-- Grid -->
                <line x1="480" y1="140" x2="550" y2="140" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="550" y="100" width="80" height="80" fill="#fce7f3" stroke="#dc2626" stroke-width="2" rx="4"/>
                <text x="590" y="135" text-anchor="middle" font-size="12" fill="#dc2626">Grid</text>
                <text x="575" y="155" text-anchor="middle" font-size="12" fill="#dc2626" font-style="italic">v</text>
                <text x="583" y="159" text-anchor="middle" font-size="9" fill="#dc2626">g</text>
                <text x="595" y="155" text-anchor="middle" font-size="11" fill="#dc2626">âˆ Î¸</text>
                <text x="607" y="159" text-anchor="middle" font-size="9" fill="#dc2626">g</text>
                
                <!-- State variables note -->
                <rect x="50" y="245" width="600" height="25" fill="#f8f9fa" rx="4"/>
                <text x="350" y="262" text-anchor="middle" font-size="11" fill="#4a4a6a">
                    çŠ¶æ…‹å¤‰æ•°: iLï¼ˆã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é›»æµï¼‰, voï¼ˆã‚³ãƒ³ãƒ‡ãƒ³ã‚µé›»åœ§ï¼‰, ioï¼ˆå‡ºåŠ›é›»æµï¼‰
                </text>
            </svg>
        </div>
        
        <h3>2.2 KVL/KCLã«ã‚ˆã‚‹æ–¹ç¨‹å¼å°å‡º</h3>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">ãƒ•ã‚£ãƒ«ã‚¿ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ã®KVL</div>
            </div>
            <p>ã‚¤ãƒ³ãƒãƒ¼ã‚¿å‡ºåŠ›ã‹ã‚‰ã‚³ãƒ³ãƒ‡ãƒ³ã‚µç¯€ç‚¹ã¾ã§ã®ãƒ«ãƒ¼ãƒ—ã«KVLã‚’é©ç”¨ï¼š</p>
            <div class="eq-box physical">
                <div class="eq-content">
                    $$ v_{\text{inv}} = L_f \frac{di_L}{dt} + R_f i_L + v_o $$
                </div>
            </div>
            <p>$\dfrac{di_L}{dt}$ ã«ã¤ã„ã¦æ•´ç†ã™ã‚‹ã¨ï¼š</p>
            <div class="eq-box state-space">
                <div class="eq-content">
                    $$ \frac{di_L}{dt} = \frac{1}{L_f} \left( v_{\text{inv}} - R_f i_L - v_o \right) $$
                </div>
            </div>
        </div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">ã‚³ãƒ³ãƒ‡ãƒ³ã‚µç¯€ç‚¹ã®KCL</div>
            </div>
            <p>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µç¯€ç‚¹ã§ã®é›»æµãƒãƒ©ãƒ³ã‚¹ï¼š</p>
            <div class="eq-box physical">
                <div class="eq-content">
                    $$ i_L = C_f \frac{dv_o}{dt} + i_o $$
                </div>
            </div>
            <p>$\dfrac{dv_o}{dt}$ ã«ã¤ã„ã¦æ•´ç†ã™ã‚‹ã¨ï¼š</p>
            <div class="eq-box state-space">
                <div class="eq-content">
                    $$ \frac{dv_o}{dt} = \frac{1}{C_f} \left( i_L - i_o \right) $$
                </div>
            </div>
        </div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">å‡ºåŠ›ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ã®KVL</div>
            </div>
            <p>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µã‹ã‚‰ã‚°ãƒªãƒƒãƒ‰ã¾ã§ã®ãƒ«ãƒ¼ãƒ—ï¼š</p>
            <div class="eq-box physical">
                <div class="eq-content">
                    $$ v_o = L_c \frac{di_o}{dt} + v_g $$
                </div>
            </div>
            <p>$\dfrac{di_o}{dt}$ ã«ã¤ã„ã¦æ•´ç†ã™ã‚‹ã¨ï¼š</p>
            <div class="eq-box state-space">
                <div class="eq-content">
                    $$ \frac{di_o}{dt} = \frac{1}{L_c} \left( v_o - v_g \right) $$
                </div>
            </div>
        </div>
        
        <h3>2.3 dqåº§æ¨™ç³»ã¸ã®å¤‰æ›</h3>
        
        <p>ä¸‰ç›¸äº¤æµç³»ã§ã¯ã€å›è»¢åº§æ¨™ç³»ï¼ˆdqåº§æ¨™ç³»ï¼‰ã§è§£æã™ã‚‹ã®ãŒä¾¿åˆ©ã§ã™ã€‚åº§æ¨™å¤‰æ›ã«ã‚ˆã‚Šã€å®šå¸¸çŠ¶æ…‹ã§ç›´æµé‡ã«ãªã‚Šã¾ã™ã€‚</p>
        
        <div class="note">
            <div class="note-title">ğŸ”„ dqå¤‰æ›ã®ãƒã‚¤ãƒ³ãƒˆ</div>
            <p>abcåº§æ¨™ç³»ã‹ã‚‰dqåº§æ¨™ç³»ã¸ã®å¤‰æ›ã§ã¯ã€<strong>å›è»¢ã«ã‚ˆã‚‹çµåˆé …</strong>ï¼ˆ$\omega L i$ ã‚„ $\omega C v$ï¼‰ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ç‰©ç†çš„ã«ã¯åº§æ¨™ç³»ã®å›è»¢ã«ã‚ˆã‚‹ã‚³ãƒªã‚ªãƒªåŠ›ã«ç›¸å½“ã—ã¾ã™ã€‚</p>
        </div>
        
        <div class="eq-box important">
            <div class="eq-title">dqåº§æ¨™ç³»ã§ã®LCãƒ•ã‚£ãƒ«ã‚¿æ–¹ç¨‹å¼</div>
            <div class="eq-content">
                <p><strong>ã€dè»¸ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é›»æµã€‘</strong></p>
                $$ L_f \frac{di_{Ld}}{dt} = v_{\text{inv},d} - R_f i_{Ld} - v_{od} \color{#dc2626}{+ \omega L_f i_{Lq}} $$
                
                <p><strong>ã€qè»¸ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é›»æµã€‘</strong></p>
                $$ L_f \frac{di_{Lq}}{dt} = v_{\text{inv},q} - R_f i_{Lq} - v_{oq} \color{#dc2626}{- \omega L_f i_{Ld}} $$
                
                <p><strong>ã€dè»¸ã‚³ãƒ³ãƒ‡ãƒ³ã‚µé›»åœ§ã€‘</strong></p>
                $$ C_f \frac{dv_{od}}{dt} = i_{Ld} - i_{od} \color{#dc2626}{+ \omega C_f v_{oq}} $$
                
                <p><strong>ã€qè»¸ã‚³ãƒ³ãƒ‡ãƒ³ã‚µé›»åœ§ã€‘</strong></p>
                $$ C_f \frac{dv_{oq}}{dt} = i_{Lq} - i_{oq} \color{#dc2626}{- \omega C_f v_{od}} $$
            </div>
        </div>
        
        <p><span style="color:#dc2626; font-weight:bold;">èµ¤å­—ã®é …</span>ãŒdqå¤‰æ›ã«ã‚ˆã£ã¦è¿½åŠ ã•ã‚ŒãŸçµåˆé …ã§ã™ã€‚</p>
        
        <h3>2.4 çŠ¶æ…‹ç©ºé–“è¡¨ç¾ã¸ã®æ•´ç†</h3>
        
        <div class="eq-box state-space">
            <div class="eq-title">LCãƒ•ã‚£ãƒ«ã‚¿ã®çŠ¶æ…‹ç©ºé–“è¡¨ç¾</div>
            <div class="eq-content">
                <p>çŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ«: $\mathbf{x} = \begin{bmatrix} i_{Ld} & i_{Lq} & v_{od} & v_{oq} \end{bmatrix}^T$</p>
                
                $$ \frac{d\mathbf{x}}{dt} = \mathbf{A}_{\text{LC}} \mathbf{x} + \mathbf{B}_{\text{LC}} \mathbf{u} $$
                
                $$ \mathbf{A}_{\text{LC}} = \begin{bmatrix} 
                -\frac{R_f}{L_f} & \omega & -\frac{1}{L_f} & 0 \\
                -\omega & -\frac{R_f}{L_f} & 0 & -\frac{1}{L_f} \\
                \frac{1}{C_f} & 0 & 0 & \omega \\
                0 & \frac{1}{C_f} & -\omega & 0
                \end{bmatrix} $$
            </div>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 3: Transmission Line -->
        <h2 id="section3">3. é€é›»ç·šã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«</h2>
        
        <h3>3.1 RLç·šè·¯ãƒ¢ãƒ‡ãƒ«</h3>
        
        <div class="circuit-container">
            <svg class="circuit-svg" viewBox="0 0 600 180" xmlns="http://www.w3.org/2000/svg">
                <rect width="600" height="180" fill="white"/>
                <text x="300" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">é€é›»ç·šRLãƒ¢ãƒ‡ãƒ«</text>
                
                <!-- Bus 1 -->
                <rect x="50" y="70" width="80" height="50" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
                <text x="90" y="95" text-anchor="middle" font-size="12" fill="#2563eb">Bus 1</text>
                <text x="77" y="112" text-anchor="middle" font-size="11" fill="#2563eb" font-style="italic">v</text>
                <text x="85" y="116" text-anchor="middle" font-size="8" fill="#2563eb">1</text>
                <text x="95" y="112" text-anchor="middle" font-size="11" fill="#2563eb">âˆ Î¸</text>
                <text x="107" y="116" text-anchor="middle" font-size="8" fill="#2563eb">1</text>
                
                <!-- R -->
                <line x1="130" y1="95" x2="180" y2="95" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="180" y="80" width="50" height="30" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="4"/>
                <text x="205" y="100" text-anchor="middle" font-size="13" fill="#059669" font-style="italic">R</text>
                
                <!-- L -->
                <line x1="230" y1="95" x2="280" y2="95" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="280" y="80" width="50" height="30" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
                <text x="305" y="100" text-anchor="middle" font-size="13" fill="#2563eb" font-style="italic">L</text>
                <line x1="330" y1="95" x2="380" y2="95" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- Current arrow -->
                <path d="M 250 70 L 270 70 L 265 65 M 270 70 L 265 75" stroke="#7c3aed" stroke-width="2" fill="none"/>
                <text x="255" y="60" text-anchor="middle" font-size="12" fill="#7c3aed" font-style="italic">i</text>
                <text x="268" y="64" text-anchor="middle" font-size="9" fill="#7c3aed">line</text>
                
                <!-- Bus 2 -->
                <rect x="380" y="70" width="80" height="50" fill="#fce7f3" stroke="#dc2626" stroke-width="2" rx="4"/>
                <text x="420" y="95" text-anchor="middle" font-size="12" fill="#dc2626">Bus 2</text>
                <text x="407" y="112" text-anchor="middle" font-size="11" fill="#dc2626" font-style="italic">v</text>
                <text x="415" y="116" text-anchor="middle" font-size="8" fill="#dc2626">2</text>
                <text x="425" y="112" text-anchor="middle" font-size="11" fill="#dc2626">âˆ Î¸</text>
                <text x="437" y="116" text-anchor="middle" font-size="8" fill="#dc2626">2</text>
                
                <!-- Equation -->
                <text x="300" y="160" text-anchor="middle" font-size="12" fill="#4a4a6a">KVL: vâ‚ âˆ’ vâ‚‚ = RÂ·i + LÂ·(di/dt)</text>
            </svg>
        </div>
        
        <div class="eq-box physical">
            <div class="eq-title">é€é›»ç·šã®KVLï¼ˆå˜ç›¸ï¼‰</div>
            <div class="eq-content">
                $$ v_1 - v_2 = R_{\text{line}} \cdot i_{\text{line}} + L_{\text{line}} \frac{di_{\text{line}}}{dt} $$
            </div>
        </div>
        
        <p>$\dfrac{di_{\text{line}}}{dt}$ ã«ã¤ã„ã¦æ•´ç†ã™ã‚‹ã¨ï¼š</p>
        
        <div class="eq-box state-space">
            <div class="eq-content">
                $$ \frac{di_{\text{line}}}{dt} = \frac{1}{L_{\text{line}}} \left( v_1 - v_2 - R_{\text{line}} \cdot i_{\text{line}} \right) $$
            </div>
        </div>
        
        <h3>3.2 dqåº§æ¨™ç³»ã§ã®é€é›»ç·š</h3>
        
        <div class="eq-box important">
            <div class="eq-title">dqåº§æ¨™ç³»ã§ã®é€é›»ç·šæ–¹ç¨‹å¼</div>
            <div class="eq-content">
                $$ L \frac{di_d}{dt} = v_{1d} - v_{2d} - R \cdot i_d \color{#dc2626}{+ \omega L \cdot i_q} $$
                $$ L \frac{di_q}{dt} = v_{1q} - v_{2q} - R \cdot i_q \color{#dc2626}{- \omega L \cdot i_d} $$
            </div>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 4: PLL -->
        <h2 id="section4">4. PLLã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼ˆGFLï¼‰</h2>
        
        <p>GFLã‚¤ãƒ³ãƒãƒ¼ã‚¿ã¯ã€ç³»çµ±é›»åœ§ã®ä½ç›¸ã‚’è¿½å¾“ã™ã‚‹ãŸã‚ã«PLLï¼ˆPhase-Locked Loopï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
        
        <h3>4.1 PLLã®ãƒ–ãƒ­ãƒƒã‚¯å›³</h3>
        
        <div class="circuit-container">
            <svg class="circuit-svg" viewBox="0 0 700 220" xmlns="http://www.w3.org/2000/svg">
                <rect width="700" height="220" fill="white"/>
                <text x="350" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">PLLï¼ˆPhase-Locked Loopï¼‰ã®ãƒ–ãƒ­ãƒƒã‚¯å›³</text>
                
                <!-- Input v_q -->
                <text x="25" y="100" font-size="12" fill="#2563eb" font-style="italic">v</text>
                <text x="33" y="104" font-size="9" fill="#2563eb">q</text>
                <text x="25" y="118" font-size="10" fill="#4a4a6a">(qè»¸é›»åœ§)</text>
                <line x1="55" y1="100" x2="120" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                <path d="M 110 100 L 120 100 L 115 95 M 120 100 L 115 105" stroke="#1a1a2e" stroke-width="2" fill="none"/>
                
                <!-- PI Controller -->
                <rect x="120" y="75" width="100" height="50" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="4"/>
                <text x="170" y="97" text-anchor="middle" font-size="12" fill="#059669" font-weight="bold">PIåˆ¶å¾¡å™¨</text>
                <text x="170" y="115" text-anchor="middle" font-size="11" fill="#059669">K</text>
                <text x="178" y="118" text-anchor="middle" font-size="8" fill="#059669">p</text>
                <text x="187" y="115" text-anchor="middle" font-size="11" fill="#059669">+ K</text>
                <text x="202" y="118" text-anchor="middle" font-size="8" fill="#059669">i</text>
                <text x="210" y="115" text-anchor="middle" font-size="11" fill="#059669">/s</text>
                
                <line x1="220" y1="100" x2="280" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                <path d="M 270 100 L 280 100 L 275 95 M 280 100 L 275 105" stroke="#1a1a2e" stroke-width="2" fill="none"/>
                
                <!-- Sum -->
                <circle cx="310" cy="100" r="15" fill="white" stroke="#1a1a2e" stroke-width="2"/>
                <text x="310" y="105" text-anchor="middle" font-size="14">+</text>
                <line x1="310" y1="55" x2="310" y2="85" stroke="#1a1a2e" stroke-width="2"/>
                <text x="303" y="50" text-anchor="middle" font-size="12" fill="#d97706" font-style="italic">Ï‰</text>
                <text x="317" y="54" text-anchor="middle" font-size="9" fill="#d97706">0</text>
                
                <line x1="325" y1="100" x2="380" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- omega output -->
                <rect x="380" y="80" width="60" height="40" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="4"/>
                <text x="410" y="105" text-anchor="middle" font-size="14" fill="#d97706" font-style="italic">Ï‰</text>
                
                <line x1="440" y1="100" x2="500" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- Integrator -->
                <rect x="500" y="75" width="80" height="50" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
                <text x="540" y="97" text-anchor="middle" font-size="14" fill="#2563eb">âˆ« dt</text>
                <text x="540" y="115" text-anchor="middle" font-size="10" fill="#2563eb">ç©åˆ†å™¨</text>
                
                <!-- theta output -->
                <line x1="580" y1="100" x2="640" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                <text x="660" y="100" font-size="14" fill="#7c3aed" font-weight="bold" font-style="italic">Î¸</text>
                <text x="660" y="118" font-size="10" fill="#4a4a6a">(å‡ºåŠ›ä½ç›¸)</text>
                
                <!-- State variables -->
                <rect x="100" y="165" width="500" height="35" fill="#f8f9fa" rx="4"/>
                <text x="350" y="187" text-anchor="middle" font-size="11" fill="#4a4a6a">
                    çŠ¶æ…‹å¤‰æ•°: Îµï¼ˆPIç©åˆ†å™¨ï¼‰, Ï‰ï¼ˆè§’é€Ÿåº¦ï¼‰, Î¸ï¼ˆä½ç›¸è§’ï¼‰
                </text>
            </svg>
        </div>
        
        <h3>4.2 PLLã®å¾®åˆ†æ–¹ç¨‹å¼</h3>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">PIåˆ¶å¾¡å™¨ã®ç©åˆ†å™¨çŠ¶æ…‹</div>
            </div>
            <div class="eq-box state-space">
                <div class="eq-content">
                    $$ \frac{d\varepsilon}{dt} = v_q \quad \text{ï¼ˆqè»¸é›»åœ§ã‚’ç©åˆ†ï¼‰} $$
                </div>
            </div>
        </div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">PIå‡ºåŠ› â†’ è§’é€Ÿåº¦ï¼ˆLPFä»˜ãï¼‰</div>
            </div>
            <div class="eq-box state-space">
                <div class="eq-content">
                    $$ \tau_{\text{pll}} \frac{d\omega}{dt} = -\omega + \omega_0 + K_p v_q + K_i \varepsilon $$
                </div>
            </div>
        </div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">ä½ç›¸è§’ã®æ™‚é–“ç©åˆ†</div>
            </div>
            <div class="eq-box state-space">
                <div class="eq-content">
                    $$ \frac{d\theta}{dt} = \omega $$
                </div>
            </div>
        </div>
        
        <div class="note">
            <div class="note-title">ğŸ“Œ PLLã®ç‰©ç†çš„æ„å‘³</div>
            <p>PLLã¯ã€Œ$v_q = 0$ã€ã¨ãªã‚‹ã‚ˆã†ã«ä½ç›¸ $\theta$ ã‚’èª¿æ•´ã™ã‚‹è² å¸°é‚„ãƒ«ãƒ¼ãƒ—ã§ã™ã€‚$v_q = 0$ ã®ã¨ãã€æ¨å®šã—ãŸä½ç›¸ $\theta$ ãŒç³»çµ±é›»åœ§ã®çœŸã®ä½ç›¸ã¨ä¸€è‡´ã—ã¾ã™ã€‚</p>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 5: Droop/VSG -->
        <h2 id="section5">5. ãƒ‰ãƒ«ãƒ¼ãƒ—/VSGåˆ¶å¾¡ï¼ˆGFMï¼‰</h2>
        
        <p>GFMã‚¤ãƒ³ãƒãƒ¼ã‚¿ã¯ã€PLLã®ä»£ã‚ã‚Šã«è‡ªã‚‰å‘¨æ³¢æ•°ãƒ»é›»åœ§ã‚’ç”Ÿæˆã™ã‚‹åˆ¶å¾¡ã‚’è¡Œã„ã¾ã™ã€‚</p>
        
        <h3>5.1 ãƒ‰ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡</h3>
        
        <div class="circuit-container">
            <svg class="circuit-svg" viewBox="0 0 500 200" xmlns="http://www.w3.org/2000/svg">
                <rect width="500" height="200" fill="white"/>
                <text x="250" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">P-Ï‰ ãƒ‰ãƒ«ãƒ¼ãƒ—ç‰¹æ€§</text>
                
                <!-- Axes -->
                <line x1="80" y1="160" x2="420" y2="160" stroke="#1a1a2e" stroke-width="2"/>
                <line x1="80" y1="160" x2="80" y2="50" stroke="#1a1a2e" stroke-width="2"/>
                <path d="M 420 160 L 410 155 M 420 160 L 410 165" stroke="#1a1a2e" stroke-width="2" fill="none"/>
                <path d="M 80 50 L 75 60 M 80 50 L 85 60" stroke="#1a1a2e" stroke-width="2" fill="none"/>
                
                <!-- Labels -->
                <text x="420" y="180" text-anchor="middle" font-size="12" fill="#1a1a2e" font-style="italic">P</text>
                <text x="55" y="100" text-anchor="middle" font-size="12" fill="#1a1a2e" font-style="italic">Ï‰</text>
                
                <!-- Droop line -->
                <line x1="100" y1="70" x2="380" y2="140" stroke="#059669" stroke-width="3"/>
                
                <!-- Operating point -->
                <circle cx="240" cy="105" r="6" fill="#dc2626"/>
                <text x="260" y="100" font-size="11" fill="#dc2626">å‹•ä½œç‚¹</text>
                
                <!-- Reference lines -->
                <line x1="80" y1="105" x2="240" y2="105" stroke="#4a4a6a" stroke-width="1" stroke-dasharray="4"/>
                <line x1="240" y1="105" x2="240" y2="160" stroke="#4a4a6a" stroke-width="1" stroke-dasharray="4"/>
                <text x="60" y="108" font-size="11" fill="#d97706" font-style="italic">Ï‰</text>
                <text x="70" y="112" font-size="8" fill="#d97706">0</text>
                <text x="235" y="175" font-size="11" fill="#2563eb" font-style="italic">P</text>
                <text x="245" y="179" font-size="8" fill="#2563eb">0</text>
                
                <!-- Slope -->
                <text x="340" y="100" font-size="12" fill="#059669">å‚¾ã: âˆ’m</text>
                <text x="372" y="104" font-size="9" fill="#059669">p</text>
            </svg>
        </div>
        
        <div class="eq-box important">
            <div class="eq-title">ãƒ‰ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡æ–¹ç¨‹å¼</div>
            <div class="eq-content">
                <p><strong>ã€P-Ï‰ ãƒ‰ãƒ«ãƒ¼ãƒ—ï¼ˆå‘¨æ³¢æ•°åˆ¶å¾¡ï¼‰ã€‘</strong></p>
                $$ \omega = \omega_0 - m_p (P - P_0) $$
                
                <p><strong>ã€Q-V ãƒ‰ãƒ«ãƒ¼ãƒ—ï¼ˆé›»åœ§åˆ¶å¾¡ï¼‰ã€‘</strong></p>
                $$ V = V_0 - m_q (Q - Q_0) $$
                
                <p><strong>ã€ä½ç›¸è§’ã€‘</strong></p>
                $$ \frac{d\theta}{dt} = \omega $$
            </div>
        </div>
        
        <h3>5.2 VSGï¼ˆVirtual Synchronous Generatorï¼‰åˆ¶å¾¡</h3>
        
        <p>VSGåˆ¶å¾¡ã¯ã€åŒæœŸç™ºé›»æ©Ÿã®ã‚¹ã‚¤ãƒ³ã‚°æ–¹ç¨‹å¼ã‚’æ¨¡æ“¬ã™ã‚‹ã“ã¨ã§ä»®æƒ³çš„ãªæ…£æ€§ã‚’å®Ÿç¾ã—ã¾ã™ã€‚</p>
        
        <div class="eq-box important">
            <div class="eq-title">VSGã®ã‚¹ã‚¤ãƒ³ã‚°æ–¹ç¨‹å¼ï¼ˆä»®æƒ³åŒæœŸæ©Ÿï¼‰</div>
            <div class="eq-content">
                $$ J \frac{d\omega}{dt} = P_{\text{ref}} - P_e - D(\omega - \omega_0) $$
                $$ \frac{d\theta}{dt} = \omega $$
                
                <table class="nom-table" style="margin-top: 1rem;">
                    <tr><td>$J$</td><td>ä»®æƒ³æ…£æ€§å®šæ•° [kgÂ·mÂ² ã¾ãŸã¯ s]</td></tr>
                    <tr><td>$D$</td><td>ä»®æƒ³ãƒ€ãƒ³ãƒ”ãƒ³ã‚°ä¿‚æ•°</td></tr>
                    <tr><td>$P_{\text{ref}}$</td><td>æœ‰åŠ¹é›»åŠ›æŒ‡ä»¤å€¤</td></tr>
                    <tr><td>$P_e$</td><td>å®Ÿéš›ã®å‡ºåŠ›é›»åŠ›</td></tr>
                </table>
            </div>
        </div>
        
        <div class="note">
            <div class="note-title">ğŸ”„ ãƒ‰ãƒ«ãƒ¼ãƒ— vs VSG ã®æ¯”è¼ƒ</div>
            <table class="comparison-table">
                <tr>
                    <th>é …ç›®</th>
                    <th>ãƒ‰ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡</th>
                    <th>VSGåˆ¶å¾¡</th>
                </tr>
                <tr>
                    <td>å‘¨æ³¢æ•°å¿œç­”</td>
                    <td>ç¬æ™‚ï¼ˆä»£æ•°çš„ï¼‰</td>
                    <td>æ…£æ€§ã«ã‚ˆã‚‹é…ã‚Œã‚ã‚Š</td>
                </tr>
                <tr>
                    <td>æ…£æ€§</td>
                    <td>ãªã—</td>
                    <td>ä»®æƒ³æ…£æ€§ $J$</td>
                </tr>
                <tr>
                    <td>çŠ¶æ…‹å¤‰æ•°</td>
                    <td>$\theta$ ã®ã¿</td>
                    <td>$\omega$, $\theta$</td>
                </tr>
            </table>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 6: Synchronous Generator -->
        <h2 id="section6">6. åŒæœŸç™ºé›»æ©Ÿã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼ˆSGï¼‰</h2>
        
        <h3>6.1 æ©Ÿæ¢°ç³»ã®ãƒ¢ãƒ‡ãƒ«</h3>
        
        <div class="circuit-container">
            <svg class="circuit-svg" viewBox="0 0 550 200" xmlns="http://www.w3.org/2000/svg">
                <rect width="550" height="200" fill="white"/>
                <text x="275" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">åŒæœŸç™ºé›»æ©Ÿã®æ©Ÿæ¢°ç³»ãƒ¢ãƒ‡ãƒ«</text>
                
                <!-- Turbine -->
                <rect x="30" y="80" width="80" height="60" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="4"/>
                <text x="70" y="105" text-anchor="middle" font-size="11" fill="#059669" font-weight="bold">ã‚¿ãƒ¼ãƒ“ãƒ³</text>
                <text x="62" y="125" text-anchor="middle" font-size="11" fill="#059669" font-style="italic">T</text>
                <text x="74" y="129" text-anchor="middle" font-size="8" fill="#059669">m</text>
                
                <!-- Shaft -->
                <line x1="110" y1="110" x2="170" y2="110" stroke="#1a1a2e" stroke-width="4"/>
                
                <!-- Rotor -->
                <circle cx="220" cy="110" r="45" fill="#dbeafe" stroke="#2563eb" stroke-width="2"/>
                <text x="220" y="100" text-anchor="middle" font-size="11" fill="#2563eb" font-weight="bold">å›è»¢å­</text>
                <text x="205" y="120" text-anchor="middle" font-size="11" fill="#2563eb" font-style="italic">J</text>
                <text x="215" y="120" text-anchor="middle" font-size="11" fill="#2563eb">,</text>
                <text x="225" y="120" text-anchor="middle" font-size="11" fill="#2563eb" font-style="italic">Ï‰</text>
                <text x="235" y="120" text-anchor="middle" font-size="11" fill="#2563eb">,</text>
                <text x="245" y="120" text-anchor="middle" font-size="11" fill="#2563eb" font-style="italic">Î¸</text>
                
                <!-- Stator -->
                <circle cx="220" cy="110" r="58" fill="none" stroke="#7c3aed" stroke-width="2" stroke-dasharray="4"/>
                <text x="220" y="180" text-anchor="middle" font-size="10" fill="#7c3aed">å›ºå®šå­</text>
                
                <!-- Electrical load -->
                <line x1="265" y1="110" x2="320" y2="110" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="320" y="85" width="80" height="50" fill="#fce7f3" stroke="#dc2626" stroke-width="2" rx="4"/>
                <text x="360" y="105" text-anchor="middle" font-size="11" fill="#dc2626" font-weight="bold">é›»æ°—è² è·</text>
                <text x="350" y="125" text-anchor="middle" font-size="11" fill="#dc2626" font-style="italic">T</text>
                <text x="360" y="129" text-anchor="middle" font-size="8" fill="#dc2626">e</text>
                <text x="370" y="125" text-anchor="middle" font-size="11" fill="#dc2626">,</text>
                <text x="382" y="125" text-anchor="middle" font-size="11" fill="#dc2626" font-style="italic">P</text>
                <text x="392" y="129" text-anchor="middle" font-size="8" fill="#dc2626">e</text>
                
                <!-- Damping -->
                <rect x="430" y="85" width="70" height="50" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="4"/>
                <text x="465" y="105" text-anchor="middle" font-size="11" fill="#d97706" font-weight="bold">åˆ¶å‹•</text>
                <text x="465" y="125" text-anchor="middle" font-size="12" fill="#d97706" font-style="italic">D</text>
            </svg>
        </div>
        
        <p>å›è»¢å­ã®é‹å‹•æ–¹ç¨‹å¼ï¼ˆãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³ã®ç¬¬2æ³•å‰‡ã®å›è»¢ç‰ˆï¼‰ï¼š</p>
        
        <div class="eq-box physical">
            <div class="eq-title">ã‚¹ã‚¤ãƒ³ã‚°æ–¹ç¨‹å¼ï¼ˆSwing Equationï¼‰</div>
            <div class="eq-content">
                $$ J \frac{d\omega}{dt} = T_m - T_e - D(\omega - \omega_0) $$
                $$ \frac{d\theta}{dt} = \omega - \omega_0 \quad \text{ï¼ˆç›¸å¯¾ä½ç›¸è§’ï¼‰} $$
                
                <table class="nom-table" style="margin-top: 1rem;">
                    <tr><td>$J$</td><td>æ…£æ€§ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆ [kgÂ·mÂ²]</td></tr>
                    <tr><td>$T_m$</td><td>æ©Ÿæ¢°ãƒˆãƒ«ã‚¯ï¼ˆã‚¿ãƒ¼ãƒ“ãƒ³ã‹ã‚‰ï¼‰[NÂ·m]</td></tr>
                    <tr><td>$T_e$</td><td>é›»æ°—ãƒˆãƒ«ã‚¯ï¼ˆç™ºé›»è² è·ï¼‰[NÂ·m]</td></tr>
                    <tr><td>$D$</td><td>åˆ¶å‹•ä¿‚æ•° [NÂ·mÂ·s/rad]</td></tr>
                    <tr><td>$\omega_0$</td><td>åŒæœŸè§’é€Ÿåº¦ $(2\pi f_0)$ [rad/s]</td></tr>
                </table>
            </div>
        </div>
        
        <h3>6.2 é›»æ°—ç³»ã®ãƒ¢ãƒ‡ãƒ«ï¼ˆç°¡ç•¥ãƒ¢ãƒ‡ãƒ«ï¼‰</h3>
        
        <div class="circuit-container">
            <svg class="circuit-svg" viewBox="0 0 500 180" xmlns="http://www.w3.org/2000/svg">
                <rect width="500" height="180" fill="white"/>
                <text x="250" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">åŒæœŸç™ºé›»æ©Ÿã®ç­‰ä¾¡å›è·¯ï¼ˆç°¡ç•¥ãƒ¢ãƒ‡ãƒ«ï¼‰</text>
                
                <!-- EMF -->
                <circle cx="80" cy="100" r="25" fill="#d1fae5" stroke="#059669" stroke-width="2"/>
                <text x="75" y="105" text-anchor="middle" font-size="13" fill="#059669" font-style="italic">E'</text>
                
                <line x1="105" y1="100" x2="150" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- X'd -->
                <rect x="150" y="85" width="60" height="30" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
                <text x="172" y="105" text-anchor="middle" font-size="12" fill="#2563eb" font-style="italic">X'</text>
                <text x="188" y="109" text-anchor="middle" font-size="9" fill="#2563eb">d</text>
                
                <!-- Ra -->
                <line x1="210" y1="100" x2="250" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                <rect x="250" y="85" width="50" height="30" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="4"/>
                <text x="270" y="105" text-anchor="middle" font-size="12" fill="#d97706" font-style="italic">R</text>
                <text x="283" y="109" text-anchor="middle" font-size="9" fill="#d97706">a</text>
                
                <line x1="300" y1="100" x2="350" y2="100" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- Current arrow -->
                <path d="M 320 85 L 340 85 L 335 80 M 340 85 L 335 90" stroke="#7c3aed" stroke-width="2" fill="none"/>
                <text x="330" y="75" text-anchor="middle" font-size="13" fill="#7c3aed" font-style="italic">I</text>
                
                <!-- Terminal -->
                <circle cx="350" cy="100" r="5" fill="#1a1a2e"/>
                <text x="370" y="95" font-size="12" fill="#dc2626" font-style="italic">V</text>
                <text x="382" y="99" font-size="9" fill="#dc2626">t</text>
                <text x="393" y="95" font-size="12" fill="#dc2626">âˆ Î´</text>
                
                <!-- Equation -->
                <text x="250" y="160" text-anchor="middle" font-size="12" fill="#4a4a6a" font-style="italic">E'âˆ Î¸ = V</text>
                <text x="296" y="164" text-anchor="middle" font-size="9" fill="#4a4a6a">t</text>
                <text x="310" y="160" text-anchor="middle" font-size="12" fill="#4a4a6a">âˆ Î´ + (R</text>
                <text x="346" y="164" text-anchor="middle" font-size="9" fill="#4a4a6a">a</text>
                <text x="365" y="160" text-anchor="middle" font-size="12" fill="#4a4a6a">+ jX'</text>
                <text x="395" y="164" text-anchor="middle" font-size="9" fill="#4a4a6a">d</text>
                <text x="407" y="160" text-anchor="middle" font-size="12" fill="#4a4a6a">)Â·I</text>
            </svg>
        </div>
        
        <div class="eq-box physical">
            <div class="eq-title">é›»æ°—ç³»æ–¹ç¨‹å¼ï¼ˆdqåº§æ¨™ç³»ï¼‰</div>
            <div class="eq-content">
                <p><strong>ã€dè»¸é›»åœ§æ–¹ç¨‹å¼ã€‘</strong></p>
                $$ v_d = -R_s i_d + X_q i_q $$
                
                <p><strong>ã€qè»¸é›»åœ§æ–¹ç¨‹å¼ã€‘</strong></p>
                $$ v_q = E'_q - R_s i_q - X'_d i_d $$
                
                <p><strong>ã€ç•Œç£å·»ç·šã®å‹•ç‰¹æ€§ã€‘</strong></p>
                $$ T'_{d0} \frac{dE'_q}{dt} = v_{ex} - E'_q - (X_d - X'_d) i_d $$
                
                <table class="nom-table" style="margin-top: 1rem;">
                    <tr><td>$E'_q$</td><td>éæ¸¡å†…éƒ¨èµ·é›»åŠ›ï¼ˆqè»¸ï¼‰</td></tr>
                    <tr><td>$X_d, X_q$</td><td>åŒæœŸãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹</td></tr>
                    <tr><td>$X'_d$</td><td>éæ¸¡ãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹</td></tr>
                    <tr><td>$T'_{d0}$</td><td>é–‹å›è·¯éæ¸¡æ™‚å®šæ•°</td></tr>
                    <tr><td>$v_{ex}$</td><td>åŠ±ç£é›»åœ§ï¼ˆå…¥åŠ›ï¼‰</td></tr>
                </table>
            </div>
        </div>
        
        <h3>6.3 é›»æ°—ãƒˆãƒ«ã‚¯ã®å¼</h3>
        
        <div class="eq-box physical">
            <div class="eq-content">
                $$ T_e = \psi_d i_q - \psi_q i_d $$
                
                <p>ç°¡ç•¥åŒ–ã™ã‚‹ã¨ï¼ˆå††ç­’æ©Ÿã®å ´åˆï¼‰ï¼š</p>
                $$ T_e \approx E'_q i_q + (X_d - X_q) i_d i_q $$
            </div>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 7: Integration -->
        <h2 id="section7">7. çŠ¶æ…‹ç©ºé–“è¡¨ç¾ã¸ã®çµ±åˆ</h2>
        
        <h3>7.1 çŠ¶æ…‹å¤‰æ•°ã®é¸å®šã¾ã¨ã‚</h3>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>ç‰©ç†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</th>
                    <th>ã‚¨ãƒãƒ«ã‚®ãƒ¼è“„ç©</th>
                    <th>çŠ¶æ…‹å¤‰æ•°</th>
                    <th>æ”¯é…æ–¹ç¨‹å¼</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ $L$</td>
                    <td>ç£æ°—ã‚¨ãƒãƒ«ã‚®ãƒ¼ $\frac{1}{2}Li^2$</td>
                    <td>é›»æµ $i$</td>
                    <td>$L \dfrac{di}{dt} = v$</td>
                </tr>
                <tr>
                    <td>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µ $C$</td>
                    <td>é™é›»ã‚¨ãƒãƒ«ã‚®ãƒ¼ $\frac{1}{2}Cv^2$</td>
                    <td>é›»åœ§ $v$</td>
                    <td>$C \dfrac{dv}{dt} = i$</td>
                </tr>
                <tr>
                    <td>å›è»¢ä½“ï¼ˆãƒ­ãƒ¼ã‚¿ï¼‰</td>
                    <td>é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ $\frac{1}{2}J\omega^2$</td>
                    <td>è§’é€Ÿåº¦ $\omega$</td>
                    <td>$J \dfrac{d\omega}{dt} = \tau$</td>
                </tr>
                <tr>
                    <td>ç©åˆ†å™¨ï¼ˆåˆ¶å¾¡ç³»ï¼‰</td>
                    <td>ç©åˆ†çŠ¶æ…‹</td>
                    <td>ç©åˆ†å€¤ $\xi$</td>
                    <td>$\dfrac{d\xi}{dt} = \text{å…¥åŠ›}$</td>
                </tr>
                <tr>
                    <td>ä½ç›¸è§’</td>
                    <td>å¹¾ä½•å­¦çš„çŠ¶æ…‹</td>
                    <td>è§’åº¦ $\theta$</td>
                    <td>$\dfrac{d\theta}{dt} = \omega$</td>
                </tr>
            </tbody>
        </table>
        
        <h3>7.2 çµ±åˆçŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«</h3>
        
        <div class="eq-box state-space">
            <div class="eq-title">ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿çŠ¶æ…‹ç©ºé–“è¡¨ç¾</div>
            <div class="eq-content">
                $$ \mathbf{E} \dot{\mathbf{x}} = \mathbf{A} \mathbf{x} + \mathbf{B} \mathbf{u} $$
                $$ \mathbf{y} = \mathbf{C} \mathbf{x} + \mathbf{D} \mathbf{u} $$
                
                <p>çŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ«ã®æ§‹æˆï¼š</p>
                $$ \mathbf{x} = \begin{bmatrix} \mathbf{x}_{\text{App1}} \\ \mathbf{x}_{\text{App2}} \\ \mathbf{x}_{\text{Network}} \end{bmatrix} = \begin{bmatrix} \text{Infinite Bus} \\ \text{ã‚¤ãƒ³ãƒãƒ¼ã‚¿/SG} \\ \text{é€é›»ç·š} \end{bmatrix} $$
            </div>
        </div>
        
        <h3>7.3 å„ãƒ¢ãƒ‡ãƒ«ã®çŠ¶æ…‹æ§‹æˆæ¯”è¼ƒ</h3>
        
        <div class="eq-box">
            <div class="eq-title">GFLï¼ˆ28çŠ¶æ…‹ï¼‰ã®å†…è¨³</div>
            <div class="eq-content">
                <p><strong>Apparatus 1 (2):</strong> $\xi_1, \xi_2$ ï¼ˆä»£æ•°å¤‰æ•°ï¼‰</p>
                <p><strong>Apparatus 2 (14):</strong></p>
                <ul style="margin-left: 2rem;">
                    <li>PLL (3): $\varepsilon, \omega, \theta$</li>
                    <li>LCãƒ•ã‚£ãƒ«ã‚¿ (4): $i_{Ld}, i_{Lq}, v_{od}, v_{oq}$</li>
                    <li>é›»æµåˆ¶å¾¡ (2): $i_{Ld,i}, i_{Lq,i}$</li>
                    <li>é›»åœ§åˆ¶å¾¡ (2): $v_{od,i}, v_{oq,i}$</li>
                    <li>å‡ºåŠ› (3): $i_{od}, i_{oq}, v_{d,\text{ref}}$</li>
                </ul>
                <p><strong>Network (12):</strong> é€é›»ç·šé›»æµ (8) + ä»£æ•°å¤‰æ•° (4)</p>
            </div>
        </div>
        
        <div class="eq-box">
            <div class="eq-title">SGï¼ˆ19çŠ¶æ…‹ï¼‰ã®å†…è¨³</div>
            <div class="eq-content">
                <p><strong>Apparatus 1 (2):</strong> $\xi_1, \xi_2$ ï¼ˆä»£æ•°å¤‰æ•°ï¼‰</p>
                <p><strong>Apparatus 2 (5):</strong></p>
                <ul style="margin-left: 2rem;">
                    <li>ç•Œç£/åŠ±ç£ (1): $\varepsilon$ ï¼ˆã¾ãŸã¯ $E'_q$ï¼‰</li>
                    <li>å›ºå®šå­é›»æµ (2): $i_d, i_q$</li>
                    <li>æ©Ÿæ¢°ç³» (2): $\omega, \theta$</li>
                </ul>
                <p><strong>Network (12):</strong> é€é›»ç·šé›»æµ (8) + ä»£æ•°å¤‰æ•° (4)</p>
            </div>
        </div>
        
        <h3>7.4 Aè¡Œåˆ—ã®ãƒ–ãƒ­ãƒƒã‚¯æ§‹é€ </h3>
        
        <div class="circuit-container">
            <svg viewBox="0 0 500 320" xmlns="http://www.w3.org/2000/svg">
                <rect width="500" height="320" fill="white"/>
                <text x="250" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#1a1a2e">Aè¡Œåˆ—ã®ãƒ–ãƒ­ãƒƒã‚¯æ§‹é€ </text>
                
                <!-- Matrix outline -->
                <rect x="80" y="50" width="240" height="240" fill="none" stroke="#1a1a2e" stroke-width="2"/>
                
                <!-- Block 1 -->
                <rect x="80" y="50" width="40" height="40" fill="rgba(99, 102, 241, 0.3)" stroke="#6366f1" stroke-width="1"/>
                
                <!-- Block 2 -->
                <rect x="120" y="90" width="120" height="120" fill="rgba(236, 72, 153, 0.3)" stroke="#ec4899" stroke-width="1"/>
                
                <!-- Block 3 -->
                <rect x="240" y="210" width="80" height="80" fill="rgba(6, 182, 212, 0.3)" stroke="#06b6d4" stroke-width="1"/>
                
                <!-- Coupling blocks -->
                <rect x="120" y="50" width="120" height="40" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-width="1" stroke-dasharray="3"/>
                <rect x="240" y="50" width="80" height="40" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-width="1" stroke-dasharray="3"/>
                <rect x="80" y="90" width="40" height="120" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-width="1" stroke-dasharray="3"/>
                <rect x="240" y="90" width="80" height="120" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-width="1" stroke-dasharray="3"/>
                <rect x="80" y="210" width="40" height="80" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-width="1" stroke-dasharray="3"/>
                <rect x="120" y="210" width="120" height="80" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-width="1" stroke-dasharray="3"/>
                
                <!-- Labels -->
                <text x="55" y="75" text-anchor="end" font-size="10" fill="#6366f1">App1</text>
                <text x="55" y="155" text-anchor="end" font-size="10" fill="#ec4899">App2</text>
                <text x="55" y="255" text-anchor="end" font-size="10" fill="#06b6d4">Net</text>
                
                <text x="100" y="45" text-anchor="middle" font-size="10" fill="#6366f1">App1</text>
                <text x="180" y="45" text-anchor="middle" font-size="10" fill="#ec4899">App2</text>
                <text x="280" y="45" text-anchor="middle" font-size="10" fill="#06b6d4">Net</text>
                
                <!-- Legend -->
                <g transform="translate(350, 70)">
                    <text x="0" y="0" font-weight="bold" font-size="11" fill="#1a1a2e">å‡¡ä¾‹</text>
                    <rect x="0" y="10" width="20" height="15" fill="rgba(99, 102, 241, 0.3)" stroke="#6366f1"/>
                    <text x="30" y="22" font-size="10">Infinite Bus</text>
                    <rect x="0" y="35" width="20" height="15" fill="rgba(236, 72, 153, 0.3)" stroke="#ec4899"/>
                    <text x="30" y="47" font-size="10">GFL/GFM/SG</text>
                    <rect x="0" y="60" width="20" height="15" fill="rgba(6, 182, 212, 0.3)" stroke="#06b6d4"/>
                    <text x="30" y="72" font-size="10">Network</text>
                    <rect x="0" y="85" width="20" height="15" fill="rgba(200, 200, 200, 0.2)" stroke="#999" stroke-dasharray="3"/>
                    <text x="30" y="97" font-size="10">çµåˆé …</text>
                </g>
            </svg>
        </div>
        
        <h3>7.5 ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰çŠ¶æ…‹ç©ºé–“ã¸ã®å¤‰æ›æ‰‹é †</h3>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">ç‰©ç†æ³•å‰‡ã®é©ç”¨</div>
            </div>
            <p>KVLã€KCLã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³ã®æ³•å‰‡ã‚’å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é©ç”¨</p>
        </div>
        
        <div class="derivation-arrow">â†“</div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">å¾®åˆ†æ–¹ç¨‹å¼ã®å°å‡º</div>
            </div>
            <p>$L \dfrac{di}{dt} = \ldots$, $C \dfrac{dv}{dt} = \ldots$, $J \dfrac{d\omega}{dt} = \ldots$ ã®å½¢å¼</p>
        </div>
        
        <div class="derivation-arrow">â†“</div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">dqåº§æ¨™å¤‰æ›</div>
            </div>
            <p>ä¸‰ç›¸äº¤æµ â†’ å›è»¢åº§æ¨™ç³»ï¼ˆçµåˆé … $\omega Li$, $\omega Cv$ ãŒè¿½åŠ ï¼‰</p>
        </div>
        
        <div class="derivation-arrow">â†“</div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">çŠ¶æ…‹å¤‰æ•°ã®å®šç¾©</div>
            </div>
            <p>ã‚¨ãƒãƒ«ã‚®ãƒ¼è“„ç©ç´ å­ã®å¤‰æ•°ã‚’çŠ¶æ…‹ã¨ã—ã¦é¸æŠ</p>
        </div>
        
        <div class="derivation-arrow">â†“</div>
        
        <div class="step-box">
            <div class="step-header">
                <div class="step-number">5</div>
                <div class="step-title">è¡Œåˆ—å½¢å¼ã¸ã®æ•´ç†</div>
            </div>
            <p>$\dot{\mathbf{x}} = \mathbf{A}\mathbf{x} + \mathbf{B}\mathbf{u}$, $\mathbf{y} = \mathbf{C}\mathbf{x} + \mathbf{D}\mathbf{u}$ ã®æ¨™æº–å½¢ã¸</p>
        </div>
        
        <div class="note">
            <div class="note-title">ğŸ’¡ ç‰©ç†çš„ç›´æ„Ÿã¨æ•°å­¦çš„å½¢å¼ã®å¯¾å¿œ</div>
            <table class="comparison-table">
                <tr>
                    <th>ç‰©ç†çš„æ„å‘³</th>
                    <th>è¡Œåˆ—è¦ç´ </th>
                </tr>
                <tr>
                    <td>è‡ªå·±æ¸›è¡°ï¼ˆ$R/L$, $D/J$ï¼‰</td>
                    <td>$\mathbf{A}$è¡Œåˆ—ã®å¯¾è§’è¦ç´ ï¼ˆè² ï¼‰</td>
                </tr>
                <tr>
                    <td>dqçµåˆï¼ˆ$\omega L$, $\omega C$ï¼‰</td>
                    <td>$\mathbf{A}$è¡Œåˆ—ã®åå¯¾è§’è¦ç´ ï¼ˆdqé–“ï¼‰</td>
                </tr>
                <tr>
                    <td>ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ é–“æ¥ç¶š</td>
                    <td>$\mathbf{A}$è¡Œåˆ—ã®éå¯¾è§’ãƒ–ãƒ­ãƒƒã‚¯</td>
                </tr>
                <tr>
                    <td>å¤–éƒ¨å…¥åŠ›ã®å½±éŸ¿</td>
                    <td>$\mathbf{B}$è¡Œåˆ—ã®è¦ç´ </td>
                </tr>
            </table>
        </div>
        
        <!-- Appendix -->
        <div class="appendix">
            <h2 id="appendix">Appendix: å®Œå…¨ãªè¨˜å·ä¸€è¦§</h2>
            
            <h3>A.1 ã‚®ãƒªã‚·ãƒ£æ–‡å­—</h3>
            <table class="comparison-table">
                <tr><th>è¨˜å·</th><th>åç§°</th><th>èª¬æ˜</th><th>å˜ä½</th></tr>
                <tr><td>$\omega$</td><td>ã‚ªãƒ¡ã‚¬</td><td>è§’é€Ÿåº¦</td><td>rad/s</td></tr>
                <tr><td>$\omega_0$</td><td>ã‚ªãƒ¡ã‚¬ã‚¼ãƒ­</td><td>åŒæœŸè§’é€Ÿåº¦ï¼ˆ$2\pi f_0$ï¼‰</td><td>rad/s</td></tr>
                <tr><td>$\theta$</td><td>ã‚·ãƒ¼ã‚¿</td><td>ä½ç›¸è§’</td><td>rad</td></tr>
                <tr><td>$\varepsilon$</td><td>ã‚¤ãƒ—ã‚·ãƒ­ãƒ³</td><td>ç©åˆ†å™¨çŠ¶æ…‹ / ç•Œç£çŠ¶æ…‹</td><td>âˆ’</td></tr>
                <tr><td>$\xi$</td><td>ã‚¯ã‚µã‚¤</td><td>ä»£æ•°å¤‰æ•°ï¼ˆä¸€èˆ¬ï¼‰</td><td>âˆ’</td></tr>
                <tr><td>$\psi$</td><td>ãƒ—ã‚µã‚¤</td><td>ç£æŸé–äº¤æ•°</td><td>Wb</td></tr>
                <tr><td>$\tau$</td><td>ã‚¿ã‚¦</td><td>ãƒˆãƒ«ã‚¯ / æ™‚å®šæ•°</td><td>NÂ·m / s</td></tr>
                <tr><td>$\delta$</td><td>ãƒ‡ãƒ«ã‚¿</td><td>å†…éƒ¨ä½ç›¸è§’</td><td>rad</td></tr>
            </table>
            
            <h3>A.2 æ·»å­—ã®æ„å‘³</h3>
            <table class="comparison-table">
                <tr><th>æ·»å­—</th><th>æ„å‘³</th><th>ä¾‹</th></tr>
                <tr><td>$d$, $q$</td><td>dqå›è»¢åº§æ¨™ç³»ã®è»¸</td><td>$i_d$, $v_q$</td></tr>
                <tr><td>$L$</td><td>ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é–¢é€£</td><td>$i_L$ï¼ˆã‚¤ãƒ³ãƒ€ã‚¯ã‚¿é›»æµï¼‰</td></tr>
                <tr><td>$o$</td><td>å‡ºåŠ›ï¼ˆoutputï¼‰</td><td>$v_o$ï¼ˆå‡ºåŠ›é›»åœ§ï¼‰</td></tr>
                <tr><td>$f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆfilterï¼‰</td><td>$L_f$, $C_f$</td></tr>
                <tr><td>$c$</td><td>çµåˆï¼ˆcouplingï¼‰</td><td>$L_c$</td></tr>
                <tr><td>$m$</td><td>æ©Ÿæ¢°çš„ï¼ˆmechanicalï¼‰</td><td>$T_m$ï¼ˆæ©Ÿæ¢°ãƒˆãƒ«ã‚¯ï¼‰</td></tr>
                <tr><td>$e$</td><td>é›»æ°—çš„ï¼ˆelectricalï¼‰</td><td>$T_e$, $P_e$</td></tr>
                <tr><td>$i$</td><td>ç©åˆ†å™¨ï¼ˆintegratorï¼‰</td><td>$i_{Ld,i}$</td></tr>
                <tr><td>$\text{inv}$</td><td>ã‚¤ãƒ³ãƒãƒ¼ã‚¿</td><td>$v_{\text{inv}}$</td></tr>
                <tr><td>$g$</td><td>ã‚°ãƒªãƒƒãƒ‰ï¼ˆç³»çµ±ï¼‰</td><td>$v_g$</td></tr>
                <tr><td>$\text{ref}$</td><td>æŒ‡ä»¤å€¤</td><td>$P_{\text{ref}}$</td></tr>
                <tr><td>$0$</td><td>åŸºæº–å€¤ / å®šæ ¼å€¤</td><td>$\omega_0$, $P_0$</td></tr>
                <tr><td>$'$</td><td>éæ¸¡ï¼ˆtransientï¼‰</td><td>$X'_d$, $E'_q$</td></tr>
            </table>
            
            <h3>A.3 ä¸»è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
            <table class="comparison-table">
                <tr><th>è¨˜å·</th><th>èª¬æ˜</th><th>å˜ä½</th></tr>
                <tr><td>$L_f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ãƒ³ã‚¹</td><td>H</td></tr>
                <tr><td>$R_f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿æŠµæŠ—</td><td>Î©</td></tr>
                <tr><td>$C_f$</td><td>ãƒ•ã‚£ãƒ«ã‚¿å®¹é‡</td><td>F</td></tr>
                <tr><td>$L_c$</td><td>çµåˆã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ãƒ³ã‚¹</td><td>H</td></tr>
                <tr><td>$J$</td><td>æ…£æ€§ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆ</td><td>kgÂ·mÂ²</td></tr>
                <tr><td>$D$</td><td>åˆ¶å‹•ï¼ˆãƒ€ãƒ³ãƒ”ãƒ³ã‚°ï¼‰ä¿‚æ•°</td><td>NÂ·mÂ·s/rad</td></tr>
                <tr><td>$K_p$</td><td>æ¯”ä¾‹ã‚²ã‚¤ãƒ³</td><td>âˆ’</td></tr>
                <tr><td>$K_i$</td><td>ç©åˆ†ã‚²ã‚¤ãƒ³</td><td>1/s</td></tr>
                <tr><td>$m_p$</td><td>P-Ï‰ãƒ‰ãƒ«ãƒ¼ãƒ—ä¿‚æ•°</td><td>rad/s/W</td></tr>
                <tr><td>$m_q$</td><td>Q-Vãƒ‰ãƒ«ãƒ¼ãƒ—ä¿‚æ•°</td><td>V/var</td></tr>
                <tr><td>$X_d$, $X_q$</td><td>åŒæœŸãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹</td><td>Î©</td></tr>
                <tr><td>$X'_d$</td><td>éæ¸¡ãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹</td><td>Î©</td></tr>
                <tr><td>$T'_{d0}$</td><td>é–‹å›è·¯éæ¸¡æ™‚å®šæ•°</td><td>s</td></tr>
            </table>
        </div>
        
    </div>
</body>
</html>
